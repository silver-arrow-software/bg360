{% set project = __SELF__.project %}
{% set columns = __SELF__.columns %}
{% set linked_statuses = __SELF__.linked_statuses %}

<h3>{{ project.title|e }}</h3>
<div class="content">{{ project.description|raw }}</div>

<p class="info"></p>

<div class="row" id="sas-project">
    <div class="board-list-view">
        <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12 btn-block list" id="js-add-list-block">
            <div class="js-list-form">
                <a href="#" class="js-show-add-list-form toggle-show text-muted" title="Add a list">Add a list</a>
                <form class="js-add-list hide" name="listAddForm">
                    <div class="form-group">
                        <label for="inputListName" class="sr-only">Name</label>
                        <input type="text" id="inputListName" autocomplete="off" name="name" class="form-control" placeholder="Add a list" required="" maxlength="255" title="Whitespace alone not allowed" pattern=".*\S+.*">
                    </div>
                    <div class="form-group">
                        <label for="selectStatus" class="sr-only">Name</label>
                        <select id="selectStatus" class="form-control" name="ls">
                            {% for val,txt in linked_statuses if val > 0 %}
                            <option value="{{ val }}">{{ txt }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <input type="submit" name="Save" class="btn btn-primary js-listAddForm-btn" value="Save">
                        <i class="icon-remove js-hide-add-list-form btn btn-link pull-right" title="Cancel"></i>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="itemModal" tabindex="-1" role="dialog" aria-labelledby="itemModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <div class="view-group">
                    <h4 class="modal-title" data-var="title" data-replacement="html">Modal title</h4>
                </div>
                <div class="form-group">
                    <input name="title" class="form-control" value="..." data-var="title" data-replacement="value"/>
                </div>
            </div>
            <div class="modal-body">
                <div class="view-group">
                    <div class="" data-var="description" data-replacement="html"></div>
                </div>
                <div class="form-group">
                    <textarea rows="4" name="description" class="form-control" data-var="description" data-replacement="value"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <div class="view-group">
                    <button type="button" class="btn btn-primary js-item-modal-edit-btn">Edit</button>
                </div>
                <div class="form-group">
                    <button type="button" class="btn btn-primary js-item-modal-save-btn">Save changes</button>
                </div>
                <input type="hidden" name="id" value="" data-var="id" data-replacement="value"/>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <div class="view-group">
                    <h4 class="modal-title">Confirm Delete</h4>
                </div>
            </div>
            <div class="modal-body">
                <div class="view-group">
                    <div class=""><span data-var="message" data-replacement="html">Are you sure to delete</span>?</div>
                    <div class="">
                        <strong data-var="title" data-replacement="html"></strong>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <a class="btn btn-danger btn-ok js-confirm-modal-agree-btn">Delete</a>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
$(document).ready(function() {

    var cols = {{ columns|json_encode()|raw }};
    $('#sas-project').kanbanB({
        columns: cols,
        project_id: {{ project.id|e }}
    });

});
</script>

<script id="hidden-template-column" type="text/x-custom-template">
    <div data-var="id" data-replacement="data list_id" data-list_id="" class="col-lg-3 col-md-3 col-sm-4 col-xs-12 js-board-list list">
        <div class="list-header js-list-head cur-grab">
            <div class="clearfix">
                <a href="#" class="col-xs-8 js-show-edit-list-form">
                    <span>
                        <span class="clearfix row show">
                            <strong class="get-name" data-var="name" data-replacement="html"></strong>
                            <span class="pull-right"><i class="icon-eye-open hide"></i></span>
                        </span>
                        <span data-var="linked_status" data-replacement="html" class="clearfix row show"></span>
                    </span>
                </a>

                <form role="form" name="listEditForm" class="form-horizontal js-edit-list hide">
                    <div class="form-group">
                        <label class="col-sm-4 control-label hide" for="inputListName">Name</label>
                        <div class="col-sm-12">
                            <input type="text" maxlength="255" autocomplete="off" name="name" title="Whitespace alone not allowed" required="" pattern=".*\S+.*" data-var="name" data-replacement="value" class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="sr-only col-sm-4 control-label hide">Submit</label>
                        <div class="col-sm-12">
                            <input type="submit" name="Save" class="btn btn-primary js-listEditForm-btn" value="Save">
                            <i class="icon-remove js-hide-edit-list-form btn btn-link pull-right" title="Cancel"></i>
                        </div>
                    </div>
                </form>

                <div class="pull-right col-xs-4 clearfix js-show-edit-list-config">
                    <div class="dropdown">
                        <a href="#" class="dropdown-toggle pull-right js-show-list-actions" data-toggle="dropdown" title="List Actions"><i class="icon-cog text-primary"></i></a>
                        <ul class="dropdown-menu dropdown-menu-right arrow arrow-right js-list-actions-response">
                            <li class="text-center"><strong>List Actions</strong><a class="pull-right"><i class=" icon-remove"></i></a></li>
                            <li class="divider"></li>
                            <li><a href="#" title="Add Item" class="js-show-add-item-form">Add Item</a></li>
                            <li><a href="#" title="Archive All Items in this List" class="js-show-confirm-archive-items">Archive All Items in this List</a></li>
                            <li><a href="#" title="Delete this List" class="js-show-confirm-list-delete" ><i class="icon-sm icon-warning-sign icon-type text-primary"></i>Delete this List</a></li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
        <div class="list-content vertical-scrollbar vertical-scrollbar-box js-board-list-items">&nbsp;</div>

        <div class="list-footer clearfix">
            <div class="pull-left">
                <a href="#" title="Add an item" class="js-show-add-item-form js-bottom text-muted">Add an item</a>
            </div>
            <div class="panel js-show-modal-item-view js-board-list-item hide">
                <form method="post" role="form" class="form-horizontal js-itemAddForm col-xs-12" name="itemAddForm">
                    <div class="form-group">
                        <textarea placeholder=" Add a item" rows="3" class="form-control" name="name" required="required"></textarea>
                    </div>
                    <div class="row">
                        <div class="pull-left">
                            <input type="submit" value="Add" class="btn btn-primary js-itemAddForm-btn">
                        </div>
                        <ul class="list-unstyled pull-right">
                            <li class="pull-left">
                                <a title="Cancel" href="#" class="btn btn-link js-hide-add-item-form"><i class="icon-remove text-muted"></i></a>
                            </li>
                            <li class="pull-right dropdown inner-dropdown">
                                <a title="Options" data-toggle="dropdown" class="btn btn-link btn-block dropdown-toggle js-show-item-action-list" href="#"><i class="icon-cog text-muted"></i></a>
                            </li>
                        </ul>
                    </div>
                </form>
            </div>
        </div>

    </div>
</script>

<script id="hidden-template-item" type="text/x-custom-template">
    <div class="panel js-show-modal-item-view js-board-list-item" data-var="id" data-replacement="data item_id" data-item_id="">
        <ul class="unstyled  hide js-item-labels">
            <li data-var="title" data-replacement="html" title=""></li>
        </ul>
        <ul class="unstyled  js-item-users hide"><li>.</li></ul>
        <ul class="unstyled  js-item-due hide"></ul>
        <div class="panel-body">
            <div class="clearfix js-item-label-section-4 hide">
                <span class="cur"><i style="color:#19b19f;" data-toggle="tooltip" data-container="body" data-placement="top" data-original-title="gh" title="" class="icon-circle cur"></i></span>
            </div>

            <div class="clearfix">
                <a class="js-show-modal-item-btn" href="#" data-var="title" data-replacement="attr title" title="">
                    <span data-var="title" data-replacement="html"></span>
                </a>
            </div>

            <div class="pull-left navbar-btn">
                <ul class="list-unstyled list-inline text-muted clearfix">
                    <li data-var="vote_class" data-replacement="attr class" class=""><small title="1 Vote "><span class="icon-thumbs-up"></span><span>1</span></small></li>
                    <li data-var="desc_class" data-replacement="attr class" class="">
                        <small class="js-tooltip" data-var="description" data-replacement="attr title" data-container="body" data-html="true" data-placement="bottom" data-toggle="tooltip">
                            <span class="icon-align-left"></span>
                            <span></span>
                        </small>
                    </li>
                    <li class="pull-right item-id"><strong>#<span data-var="id" data-replacement="html"></span></strong></li>
                </ul>
            </div>

            <div class="clearfix pull-right">
                <ul class="list-unstyled list-inline text-muted clearfix">
                    <li class="pull-left js-tooltip navbar-btn hide" data-container="body" data-placement="bottom" title="" data-toggle="tooltip" data-original-title="">
                        <i class="avatar avatar-color-194 img-rounded">U</i>
                    </li>
                    <li class="pull-left js-tooltip navbar-btn hover-show" data-container="body" data-placement="bottom" title="" data-toggle="tooltip" data-original-title="Delete this item">
                        <a href="#" class="js-delete-item-btn" title="Delete item"><i class="icon-remove text-primary"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</script>